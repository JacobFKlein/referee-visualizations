---
title: "Examination of Referee Tendencies and Biases in the National Football League"
author: Tom Bliss, Connor Daly, Jacob Klein, Patrick Lewis
date: December 2018
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE,
                      warning = FALSE,
                      echo = FALSE)
```

<style>
p.caption {
  font-size: 1em;
  font-family: 'Big Caslon';
}
</style>

## Introduction

The National Football League (NFL) is arguably the most popular professional sports association in the United States. The NFL consists of 32 teams, and each team plays 16 games per season - this figure does not include playoff games, for which only a select subset of the 32 teams qualify. Every game is divided into four quarters of length 15 minutes, and each team's objective is to score more points than their opponent. Each team wants to defend their own end zone while attacking their opponent's end zone. Points in the NFL are awarded for touchdowns, extra points, safeties, and field goals. Detailed knowledge of football scoring is not particularly crucial for the purposes of comprehending the following analysis, but it may prove helpful in specific discussions.

Every NFL game is watched by a group of seven officials, which includes one referee, one umpire, and five line judges. These officials are responsible for watching and arbitrating plays, and deeming any illegal plays as penalties. When a penalty is called by an official, the penalty is enforced by moving the penalized team in their adverse direction by a pre-specified number of yards - common penalties are enforced with 5-, 10-, and 15- yard penalties.

The purpose of this project is to examine tendencies, biases, and patterns in penalties called by officials. It is important to note that we only consider calls made by referees in this analysis, since referees are most responsible for the play of game and are the appointed head official for their respective games.

Our interest in sports, and interest in the NFL specifically, prompted us to research this topic. From an NFL fan and spectator perspective, an increasing amount of attention has been placed on penalties called over the course of the past five or so years. There is often contention regarding how one can actually define a specific penalty, how to determine if one occurred, and why some teams appear to be penalized significantly more or less often than do others. Penalties can dramatically alter the flow and outcomes of games, so ensuring that penalties are called fairly and consistently is crucial to maintaining the integrity of the game.

## Data Collection

Data for this analysis was collected from the 2013-2014 NFL season through Week 9 of the 2018-2019 NFL season. It should be noted that this analysis was conducted during the 2018-2019 NFL season. Thus we have included all data available for the current season, but this season was excluded in any analyses in which penalties were compared over entire seasons, since all data for the entire season will not be available until February 2019.

We downloaded play-by-play data from NFLsavant.com:
http://www.nflsavant.com/about.php?fbclid=IwAR3c8IZngQd0eE_0jp3Z401TdZXSBa8E-qEAX8J7J4uC3--CisVr7ZQfjEQ
From this site, we downloaded CSV files from seasons beginning in 2013 through 2018. These six CSV files begin with "pbp" and are located within the "/data" folder of this repository.

We then downloaded referee game data from Pro-Football-Reference:
https://www.pro-football-reference.com/officials/index.htm?fbclid=IwAR387n92do_jrcbwKAjKNR2Y_GSGpcnWMGbCbJ7Pwmx7AdpZQRSbmglfSfU

As noted above, because there are hundreds of referees, linesmen, side judges, and line judges employed by the NFL, for the purposes of this analysis we focused only on referees. We also excluded any referees who have not been employed by the NFL for a sufficient amount of time (and thus do not yield sufficient data points); all referees in our dataset have reffed over 50 games over the span of the 2013 NFL Season through week 9 of the 2018 NFL Season.

A CSV file is available in the "/data" subfolder for each of the 17 referees we included in the analysis.

Also included in the "/data" subfolder is a file called "abbreviations.csv". This file is an aid in joining the play-by-play data to the referee data, and includes a mapping of team names to team abbreviations. For example, this file maps team name "Arizona Cardinals" to team abbreviation "ARI".

## Data Quality

As stated above, we have two sources for the data, NFL Savant and Pro-Football-Reference. While Pro-Football-Reference had no missing values and no trends suggesting that any part of the data could be incorrect, the NFL Savant data is somewhat problematic. For example, before removing data points with an undefinied Penalty Team, some of the values in the  "PenaltyType" column are nonsenical:

* "YAC 14.  A FLAG WAS THROWN"
* "BUT OFFICIALS HUDDLED AND DID NOT CALL A PENALTY."
* "CENTER-41-J.WINCHESTER"

None of these statements can be considered valid penalty types. After manually checking the espn.com logged play-by-play gamecast in the games that contained these data points, it can be seen that the data was scraped from espn.com. It seems that irregular text that contain a key word such as "Flag" or "Penalty" as can be seen above, will throw off the scraping algorithm. However, despite these small hiccups, the data is mostly sensical.

Moreover, after the data from Pro-Football-Focus and NFL Savant are merged, there are a decent percentage of missing values in the "Referee", "Home", and "Away" columns. This is due to the fact that some games in the NFL Savant play-by-play data set were reffed by referee crews who have not officiated 50 or more games over the 2013 NFL Season - 2018 NFL Season Week 9. Since NFL Savant data does not include any information on referee, home team, or away team, this data must be merged over from Pro-Football-Focus. Even though these games will be undefined for a few columns, It was deemed ideal to keep the data from them as it can be used to have more a complete analysis of other columns such as "PenaltyType" and "PenaltyYards".


## Data Processing

To simplify the data, penalty types are grouped together with a universal grouping term. Moreover, some terms accounted for less than 1% of the data after the grouping took place (Fair Catch Interference, Inelgible Player Downfield, Illegal Action to Block a Field Goal, Illegal Bat, Illegal Forward Pass, Illegal Kickoff, Illegal Player Out of Bounds, Intentional Grounding, Invalid Fair Catch Signal and Tripping) and were grouped again into the "Other" category.  Here is a table highlighting how each penalty type was grouped:

| Grouping Term    |  Penalty Types Included |
|------------------|----------------------------------------------------------------------------------------|
| <strong> Delay of Game </strong> | Delay of Game, Defensive Delay of Game, Delay of Kickoff |
| <strong> Illegal Block </strong>| Chop Block, Clipping, Illegal Blindside Block, Illegal Block Above the Wasste, Illegal Crackback, Illegal Peelback, Illegal Wedge, Offensive Holding, Low Block |
|<strong> Illegal Formation </strong>| Illegal Formation, Illegal Motion, Illegal Shift |
|<strong> Illegal Tackle </strong>| Face Mask (15 Yards), Horse Collar Tackle, Lowering the Head to Initiate Contact |
|<strong> Illegal Use of Hands </strong>| Illegal Use of Hands
|<strong> Offside </strong>| Defensive Offside, Encroachment, False Start, Neutral Zone Infraction, Offensive Offside, Offside on Free Kick |
|<strong> Pass Interference </strong>| Defensive Holding, Defensive Pass Interference, Illegal Contact, Offensive Pass Interference |
|<strong> Roughing a Protected Player </strong>| Roughing the Kicker, Roughing the Passer, Running Into the Kicker |
|<strong> Too Many Men on the Field </strong>| Defensive 12 On-Field, Defensive Too Many Men on the Field, Illegal Substitution, Offensive 12 On-Field, Offensive Too Many Men on Field |
|<strong> Unsportsmanlike Conduct </strong>| Disqualification, Personal Foul, Taunting, Unnecessary Roughness, Unsportsmanlike Conduct |
| <strong> Other </strong> | <strong>Fair Catch Interference:</strong> Fair Catch Interference, Kick Catch Interference, Interference with Opportunity to Catch<br><br> <strong>Ineligible Player Downfield:</strong> Ineligible Downfield Kick, Ineligible Downfield Pass<br><br><strong>Illegal Action to Block a Field Goal:</strong> Leverage, Leaping<br><br><strong>Illegal Bat:</strong> Illegal Bat<br><br><strong>Illegal Forward Pass:</strong>Illegal Forward Pass<br><br><strong>Illegal Kickoff:</strong> Kickoff Out of Bounds, Short Free Kick<br><br><strong>Illegal Player Out of Bounds:</strong> Illegal Touch Kick, Illegal Touch Pass, Player Out of Bounds on Kick, Player Out of Bounds on Punt <br><br><strong>Intentional Grounding:</strong> Intentional Grounding<br><br><strong>Invalid Fair Catch Signal:</strong> Invalid Fair Catch Signal<br><br><strong>Tripping:</strong> Tripping |

<br>

Additionally, due to teams moving cities as well as general inconsistency of abbreviations accross the data, the following abbreviations were updated to match the current data:

| Team Name |  Old Abbreviation   |  New Abbreviation |
|-----------|----------------------|-------------------|
| Chargers | SD | LAC | 
| Jaguars| JAC | JAX |
| Rams | LA  | LAR |
| Rams | STL | LAR |

## Analysis by Penalty Type

Week-to-week viewers of NFL football are sometimes confused about why certain types of calls occur more one week versus another. This inconsistentcy certainly could be a function of luck combined with sloppiness by the players, but it also could have to do with biases by referee crews towards calling or not calling certain penalty types. Perhaps some referee crews will throw the flag for any action approaching an illegal tackle while others may be compelled to let questionable tackles slide. After averaging all of the penalty types called for all of the data, the following bar graph can be constructed:

```{r}
library(dplyr)
library(ggplot2)
library(scales)
library(gdata)
library(tidyr)
library(kfigr)

refData = read.csv('./data/df_ref.csv')

```

```{r anchor='figure', fig.height = 6, fig.cap="Figure 1: Average Number of Each Penalty Type Called Per Game", fig.align= 'center'}

#Putting Together Data


df_ref <- refData

#Calculating Average ref data
totalNumberOfGames = nlevels(as.factor(paste(df_ref$GameDate, df_ref$Home)))

#Calculating number of games each ref worked
totalNumberOfGamesByRef <- unique(df_ref[c("Referee", "GameDate")]) %>% group_by(Referee) %>% summarize(numReffed = n())


#Adding the total game numbers to the df_ref
df_ref = merge(df_ref, totalNumberOfGamesByRef, by = "Referee")


#Getting average penalty types called for all refs
averagePenaltyTypeCalled = table(df_ref$PenaltyType) / totalNumberOfGames
df_averagePenaltyTypeCalled = as.data.frame(averagePenaltyTypeCalled)
colnames(df_averagePenaltyTypeCalled) = c("PenaltyType", "FreqTotal")


#Getting Average called by refs
PenTypeCounts <- df_ref %>% group_by(Referee, PenaltyType) %>% 
    summarize(Freq = n() / numReffed[1])

#Removing NA/Other Categories
PenTypeCounts <- PenTypeCounts[!is.na(PenTypeCounts$Referee),]
PenTypeCounts <- PenTypeCounts[PenTypeCounts$PenaltyType != "OTHER",]


#Changing Data sorted by ref to diversion from average of all refs
for (penType in levels(df_ref$PenaltyType)){
  PenTypeCounts[PenTypeCounts$PenaltyType == penType,]$Freq = 
 1  - PenTypeCounts[PenTypeCounts$PenaltyType == penType,]$Freq/as.double(averagePenaltyTypeCalled[penType])
  
}

PenTypeCounts <- merge(PenTypeCounts, df_averagePenaltyTypeCalled, by = "PenaltyType")

ggplot(df_averagePenaltyTypeCalled, aes(x = reorder(PenaltyType, - FreqTotal), y = FreqTotal)) + geom_bar(stat = "identity") + theme(plot.title = element_text(hjust = 0.5), axis.text.x  = element_text(angle=45, hjust = 1)) + xlab("Penalty Type") + ylab("Average Number called per Game") + ggtitle("Average Number of Each Penalty Type Called Per Game")+
  theme(axis.title.x = element_text(size = 16),
       axis.title.y = element_text(size = 16),
       plot.title = element_text(hjust = 0.5, size = 18))

```

Figure 1 shows how the average referee will make penalty calls in a game. Offside and Illegal Block are the most common penalties. This commonality is not suprising as running accross the line of scrimmage and blocking are two fundamental aspects of the game and thus are bound to be done incorrectly sometimes. Moreover, it is also not suprising particularly sloppy penalties such as Too Many Men on the Field, Illegal Formation and Delay of game are rare. Moreover, not every referee crew calls penalties at the exact rate highlighted in Figure 1. Figure 2 below shows the percentage of increase or decrease from these averages.


```{r anchor='figure', fig.width = 8, fig.height = 16, fig.cap="Figure 2: Percentage of Increase/Decrease from Average Penalty Type", fig.align= 'center'}
#Setting Color Scheme
PenTypeCounts$FreqType = PenTypeCounts$Freq < 0

#Plotting Data Faceted by Ref
ggplot(PenTypeCounts, aes(x=reorder(PenaltyType, FreqTotal), y=Freq, fill=FreqType))+
  geom_bar(stat="identity",position="identity")+ ggtitle("Percentage of Increase/Decrease from Average Penalty Type Called") + scale_fill_manual(values = c("green","red"), guide = FALSE)+ facet_wrap(~Referee, nrow = 8, ncol = 2, scales = 'free_x') + coord_flip() + geom_hline(yintercept=0) + theme(panel.spacing = unit(1, "lines")) +xlab('') + ylab('Percentage of Divergence from Average')  + scale_y_continuous(labels = percent, limits=c(-0.6,0.6)) +
  theme(axis.title.x = element_text(size = 16),
       axis.title.y = element_text(size = 16),
       plot.title = element_text(hjust = 0.5, size = 18))

keep(refData, sure = TRUE)


```

Figure 2 gives insight on tendencies of NFL referee crews towards calling or not calling certain penalties. For example, the crew of Bill Vinovich seems to call more penalties than average regardless of type. Moreover, Walt Anderson's crew seems to call less penalties than average regardless of type. Moreover, perhaps if Jerome Boger and his crew are officiating a game, it may be reasonable to expect an offensive game as he calls less Pass Interference, Illegal Formation and Illegal Block than average and more Roughing a Protected Player and Illegal Tackle than average.


## Analysis by Away / Home Team

It is common to think that teams are often called for more penalties when they are playing on the road as opposed to playing at home. This difference can be a function of player familiarity with the field, away team pre-snap timing due to loudness of crowd, and referee crew reaction to crowd noise encouraging or discouraging certain calls. The percentage of calls against by penalty type are shown in the figure below:

```{r, anchor='figure', fig.cap="Figure 3: Percentage of Penalties called Against Home and Away Teams by Penalty Type", fig.align= 'center', fig.width = 8}

#Reading in data
df_ref <- refData

#Calculating penalties against away team
df_ref$AgainstAway = df_ref$PenaltyTeam == df_ref$Away

#Removing rows with NA values for against away
df_ref = df_ref[!is.na(df_ref$AgainstAway),]

#making tables by penalty type
tableAgainstAway = table(df_ref[df_ref$AgainstAway,]$PenaltyType)
tableAgainstHome = table(df_ref[!df_ref$AgainstAway,]$PenaltyType)

#getting df of percentage of away vs home
df_percentage = as.data.frame(tableAgainstAway / (tableAgainstAway + tableAgainstHome))
df_percentage$against = "Away"
df_percentage2 = as.data.frame(tableAgainstHome / (tableAgainstAway + tableAgainstHome))
df_percentage2$against = "Home"
df_percentage = rbind(df_percentage, df_percentage2)

df_percentage$plotOrder = df_percentage[df_percentage$against == "Away",]$Freq

#plot
ggplot(df_percentage, aes(x = reorder(Var1, - plotOrder), y = Freq, color = against)) + geom_hline(yintercept=0.5) + geom_point(stat = "identity", size = 3) + xlab("Penalty Type") + ggtitle("% of Penalties Called Against the Home/Away Teams by Penalty Type") + ylab("Percentage of Penalties called Against") + scale_y_continuous(labels = percent, limits=c(0.4,0.6)) + labs(color = "Perentage Called Against") +coord_flip()+
  theme(axis.title.x = element_text(size = 16),
       axis.title.y = element_text(size = 16),
       plot.title = element_text(hjust = 0.5, size = 18))

```

It is not at all suprising that a timing penalty such as delay of game is the most unfavorable towards the away team, but the higher degree of Illegal Tackle penalties is decently suprising. Illegal tackle is not based on familiarity with field or pre-snap timing which suggests that it may be a function of biased referee crews. Moreover, the percentage of penalties called against away split by referee is shown in the figure below:

```{r ref_home_away, anchor='figure', fig.cap="Figure 4: Percentage of Penalties called Against Home and Away Teams by Referee", fig.align= 'center', fig.height= 7, fig.width = 7.75}

rm(df_percentage)
rm(df_percentage2)

#making tables by referee
tableAgainstAway = table(df_ref[df_ref$AgainstAway,]$Referee)
tableAgainstHome = table(df_ref[!df_ref$AgainstAway,]$Referee)

#getting df of percentage of away vs home
df_percentage = as.data.frame(tableAgainstAway / (tableAgainstAway + tableAgainstHome))
df_percentage$against = "Away"
df_percentage2 = as.data.frame(tableAgainstHome / (tableAgainstAway + tableAgainstHome))
df_percentage2$against = "Home"
df_percentage = rbind(df_percentage, df_percentage2)

df_percentage$Var1 = as.character(df_percentage$Var1)


df_percentage = rbind(df_percentage, c("AVERAGE", sum(df_ref$AgainstAway) / length(df_ref[,1]), "Away" ))

df_percentage = rbind(df_percentage, c("AVERAGE", 1 - sum(df_ref$AgainstAway) / length(df_ref[,1]), "Home"))

df_percentage$Var1 = as.factor(df_percentage$Var1)
df_percentage$Freq = as.double(df_percentage$Freq)
df_percentage$against = as.factor(df_percentage$against)

df_percentage = df_percentage[order(df_percentage$against),]
df_percentage$plotOrder = df_percentage[df_percentage$against == "Away",]$Freq

df_percentage$avg = FALSE
df_percentage[df_percentage$Var1 == "AVERAGE",]$avg = TRUE

#plot
HA_byRef <- ggplot(df_percentage, aes(x = reorder(Var1, -plotOrder), y = Freq, color = against)) + geom_hline(yintercept=0.5)  + geom_point(stat = "identity", size = 3, aes(shape = avg)) + xlab("Penalty Type") + ylab("Percentage of Penalties Against") + ggtitle("% of Penalties called Against Home/Away Teams by Referee") + scale_y_continuous(labels = percent, limits=c(0.4,0.6)) + labs(color = "Percentage Called Against") +coord_flip() + guides(shape = FALSE)+
  theme(axis.title.x = element_text(size = 16),
       axis.title.y = element_text(size = 16),
       plot.title = element_text(hjust = 0.5, size = 18))
HA_byRef
keep(HA_byRef, refData, sure = TRUE)
```

Nearly every single referee crew calls more penalties against the away team as compared to the home team. The crew led by John Hussey is the only exception and is just below 50% against away. Pete Morelli's crew has the highest percentage of penalty calls against the away team with nearly 55%. Moreover, in the end all of the referee penalty calling split is around 50% and is thus fairly even.

## Analysis by Quarter
```{r penalties_by_q, anchor='figure', fig.cap="Figure 5: Penalties per Game by Quarter", fig.align= 'center'}
df2 <- refData

df_by_q <- df2[c(1,27,28,2)]
df_by_q <- df_by_q %>%
  mutate(gameID = paste(GameDate, Home, Away))
reg_len <- n_distinct(df_by_q$gameID)
ot <- df_by_q %>%
  filter(Quarter == 5)
ot_len <- n_distinct(ot$gameID)
df_by_q <- df_by_q %>%
  group_by(Quarter) %>%
  summarise(count = n()) %>%
  mutate(adj_count = ifelse(Quarter < 5, count/reg_len, count/ot_len))
df_by_q$Quarter <- as.factor(df_by_q$Quarter)
levels(df_by_q$Quarter) <- c("Q1", "Q2", "Q3", "Q4", "Overtime")


ggplot(df_by_q, aes(x = Quarter, y = adj_count, width = 0.8)) +
  geom_bar(stat = "identity", color = "black", fill = "red", alpha = 0.6) +
  ggtitle("Penalties per Game by Quarter") +
  xlab("Quarter") +
  ylab("Count Per Game") +
  theme(axis.title.x = element_text(size = 16),
       axis.title.y = element_text(size = 16),
       plot.title = element_text(hjust = 0.5, size = 18))
```

As seen in the bar chart, most penalties are called in quarter 2, but it is in the same range as quarters 3 and quarter 4. What is perhaps the most surprising is the relatively low number of penalties that are called in the first quarter of games. A few different hypotheses for this pattern come to mind: perhaps pace of play is significantly slower in the first quarter than in the other three, or perhaps there is some inherent bias in referees not wanting to begin games by immediately calling penalties. Let us compare this trend by comparing the distribution of penalties by quarter for offense teams versus that for defense teams.

## Analysis by Yardline
```{r anchor='figure', fig.cap="Figure 6: Penalties by Yard Line", fig.align= 'center'}
df <- refData

#Get mean and standard deviation for YardLine
m <- mean(df$YardLine)
std_dev <- sd(df$YardLine)

#Histogram of penalty yard lines
ggplot(df, aes(x=YardLine)) +
  geom_histogram(aes(y = ..density..),
                 binwidth = 5,
                 color = "blue", fill = "lightgreen") +
  geom_density(color = "black", lwd=1.0) +
  stat_function(fun = dnorm, args = list(mean = m, sd = std_dev),
                color = "red", lwd = 1.0) +
  theme(plot.title = element_text(hjust = 0.5, size = 18),
        axis.title.x = element_text(size = 16),
        axis.title.y = element_text(size = 16)) +
  ggtitle("Penalties by Yard Line") +
  xlab("Yard Line") +
  ylab("Density")
```

The black line in the above graph represents the density curve of the data, while the red line is an overlaid normal distribution curve. It is interesting to note that penalty data is skewed right. This means that penalties more frequently occur closer to the offensive team's own end zone than they occur closer to the defensive team's end zone, or the target. This supports the argument that legitimate penalties may go uncalled when an offensive team gets closer to scoring. To examine this more closely, we can create a Cleveland Dot Plot to see if all referees follow a similar pattern: that is, do all referees tend to call more penalties in the defensive half of the field (yard lines 0-50) rather in the offensive half of the field (yard lines 50-100)?

```{r anchor='figure', fig.cap="Figure 7: Penalty Yard Line Averages by Referee", fig.align= 'center'}
library(tidyverse)
df_subset <- df %>%
  group_by(Referee) %>%
  summarise(mean_yard_line = mean(YardLine)) %>%
  filter(!is.na(Referee))

ggplot(df_subset, aes(x=mean_yard_line,
                      y=fct_reorder(Referee, mean_yard_line))) +
  geom_point(color = "orange",
             size = 4) +
  ggtitle("Penalty Yard Line Averages by Referee") +
  scale_y_discrete(name = 'Referee') +
  scale_x_continuous(name = "Mean Yard Line") +
  theme(plot.title = element_text(hjust = 0.5, size = 18),
      axis.title.x = element_text(size = 16),
      axis.title.y = element_text(size = 16)) +
  geom_vline(xintercept = mean(df$YardLine,))
```

This graph shows the distribution of average yard lines at which penalties were called by each referee. The graph shows that the average yard line of penalties for all referees is between 46 and 49. This finding is consistent with the results from the histogram in the previous visualization, where we saw that penalties were more frequently called at yard lines closer to the offensive team's end zone than to the defensive team's end zone.

Although all referees showed the same general pattern in the average area where they called the penalties (that being between yard lines 46 and 49), there are three outliers, relatively speaking. In general, Bill Vinovich and Craig Wrolstad call penalties at greater yard lines than most do, while Gene Steratore calls penalties at lower yard lines than most.

## Executive Summary

The frequency, consistency, and possible biases of penalty calls in the NFL are areas of football analytics that have each individually been given only minimal attention, let alone all together. By combining various publicly-available data sources, we created a comprehensive dataset that includes NFL play-by-play game data joined with detailed referee and granular penalty data.

Once we combined the various data sources into a single dataset, we began exploring the data from multiple angles. An examination of the distribution of penalties by quarter produced `r figr('penalties_by_q', prefix = TRUE)`.

Slight spikes in the frequency of penalty calls occur in the second quarter and fourth quarter of games. A high frequency of penalties in the fourth quarters of games makes sense because the game is nearing conclusion and teams take more risks in an attempt to either keep or take over the lead. However, quarter two yielding the highest frequency of penalty calls is a somewhat surprising result. At this time the game has been underway for over a full quarter which makes one intuitively think that the flow of the game is relatively steady, and both teams and referees have settled into their elements. Overtime (which generally lasts between half and three-quarters of the duration of a normal quarter) yields a penalty frequency that is seemingly proportional to a normal quarter, given the duration of play in overtime.

After some other high-level exploration of penalty distributions, we began comparing penalties called by referee. One of the most important findings of our analysis is conveyed in `r figr('ref_home_away', prefix = TRUE)`.

This graph shows the percentage of penalties that each referee crew calls against the home team (i.e. the team playing at their home stadium) versus that of the away team (i.e. the team playing on the road). We observe that all referee crews, except for that of John Hussey, call more penalties against the away team than they do against the home team. Although it cannot be stated with certainty whether referee crews are biased in favor of home teams or whether teams legitimately commit penalties at a lower rate when they are playing at home, this is certainly a notable insight.

To further explore referee crew tendencies, we examined the number of penalties called per game by each referee crew against each team. The graph below displays the notable findings from this exploration.

```{r}
# INSERT PATRICK'S GRAPH HERE
```

This visual includes only the teams which have one or more outliers in their distributions. It is interesting to see which referee crews are determined as outliers in the graph, and it is particularly noteworthy when referee crews are deemed outliers at the bottom of the distribution for some team(s), while deemed outliers at the top of the distribution for other team(s). For example, we see that John Hussey's referee crew calls significantly fewer penalties per game than the average against the New England patriots (NE), while the crew calls significantly more penalties per game than the average against the Atlanta Falcons (ATL) and the New York Giants (NYG).

```{r fig.align='right'}
htmltools::includeHTML("./docs/index.html")
```


## Conclusion

While many unique insights were uncovered through this analysis, there remain a few interesting directions in which we can proceed to perform further exploratory data analysis.

As noted above, home teams are penalized significantly less often than are away teams. This is a trend we found consistent across all teams, just about all referees, and across all quarters of games. Most NFL seasons, some games (generally less than three or four) are played at neutral fields, either in another country or at a pre-determined destination in the United States (as is the case for the Super Bowl). A limitation with this potential exploration include a significantly smaller sample size than what was used in this analysis. Moreover, we would need to be careful to filter out games that are technically at a neutral location but where one team still has locational advantage (for example if the New York Jets played the Minnesota Vikings at the New York Giants stadium). In carrying out such an analysis, we suspect that this would yield a much more balanced distribution of penalties called against opposing teams when neither team is playing at their home field.

